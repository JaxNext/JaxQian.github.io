import{_ as V}from"./plugin-vueexport-helper.x3n3nnut.js";import{o as v,c as C,F as L,p as Q,e as X,a as m,d as W,f as M,g as J,n as G,r as N,h as Y,i as $,j as Z,k as ee,l as te,s as ne,m as B,q as re,v as oe,x as se,y as ae,z as ie,t as ce,u as ue,A as z}from"./entry.K44fFWcE.js";const le={},H=e=>(Q("data-v-9006644d"),e=e(),X(),e),fe=H(()=>m("p",{class:"tip-text"},"当前浏览器不支持",-1)),pe=H(()=>m("p",{class:"tip-text"},[W("配置方法可参考"),m("a",{href:"https://juejin.cn/post/7377662459920859173",target:"_blank"},"中文教程"),W("或"),m("a",{href:"https://docs.google.com/document/d/1VG8HIyz361zGduWgNG7R_R8Xkv0OOJ8b5C9QKeCjU0c/edit?pli=1",target:"_blank"},"官方文档")],-1));function de(e,t){return v(),C(L,null,[fe,pe],64)}const _e=V(le,[["render",de],["__scopeId","data-v-9006644d"]]);function me(e){return Z()?(ee(e),!0):!1}function j(e){return typeof e=="function"?e():M(e)}const he=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ye=Object.prototype.toString,we=e=>ye.call(e)==="[object Object]",ge=()=>{};function ve(e,t){function n(...o){return new Promise((s,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(a)})}return n}const K=e=>e();function Se(e=K){const t=N(!0);function n(){t.value=!1}function o(){t.value=!0}const s=(...a)=>{t.value&&e(...a)};return{isActive:Y(t),pause:n,resume:o,eventFilter:s}}function be(e){return e||te()}function Ae(e,t,n={}){const{eventFilter:o=K,...s}=n;return $(e,ve(o,t),s)}function xe(e,t,n={}){const{eventFilter:o,...s}=n,{eventFilter:a,pause:c,resume:u,isActive:f}=Se(o);return{stop:Ae(e,t,{...s,eventFilter:a}),pause:c,resume:u,isActive:f}}function Oe(e,t=!0,n){be()?J(e,n):t?e():G(e)}function Ce(e){var t;const n=j(e);return(t=n==null?void 0:n.$el)!=null?t:n}const F=he?window:void 0;function D(...e){let t,n,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,s]=e,t=F):[t,n,o,s]=e,!t)return ge;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],c=()=>{a.forEach(p=>p()),a.length=0},u=(p,l,g,d)=>(p.addEventListener(l,g,d),()=>p.removeEventListener(l,g,d)),f=$(()=>[Ce(t),j(s)],([p,l])=>{if(c(),!p)return;const g=we(l)?{...l}:l;a.push(...n.flatMap(d=>o.map(b=>u(p,d,b,g))))},{immediate:!0,flush:"post"}),h=()=>{f(),c()};return me(h),h}const x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O="__vueuse_ssr_handlers__",Ne=Fe();function Fe(){return O in x||(x[O]=x[O]||{}),x[O]}function je(e,t){return Ne[e]||t}function Ee(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Te={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},I="vueuse-storage";function ke(e,t,n,o={}){var s;const{flush:a="pre",deep:c=!0,listenToStorageChanges:u=!0,writeDefaults:f=!0,mergeDefaults:h=!1,shallow:p,window:l=F,eventFilter:g,onError:d=r=>{console.error(r)},initOnMounted:b}=o,y=(p?ne:N)(typeof t=="function"?t():t);if(!n)try{n=je("getDefaultStorage",()=>{var r;return(r=F)==null?void 0:r.localStorage})()}catch(r){d(r)}if(!n)return y;const w=j(t),E=Ee(w),S=(s=o.serializer)!=null?s:Te[E],{pause:R,resume:T}=xe(y,()=>P(y.value),{flush:a,deep:c,eventFilter:g});l&&u&&Oe(()=>{D(l,"storage",A),D(l,I,q),b&&A()}),b||A();function k(r,i){l&&l.dispatchEvent(new CustomEvent(I,{detail:{key:e,oldValue:r,newValue:i,storageArea:n}}))}function P(r){try{const i=n.getItem(e);if(r==null)k(i,null),n.removeItem(e);else{const _=S.write(r);i!==_&&(n.setItem(e,_),k(i,_))}}catch(i){d(i)}}function U(r){const i=r?r.newValue:n.getItem(e);if(i==null)return f&&w!=null&&n.setItem(e,S.write(w)),w;if(!r&&h){const _=S.read(i);return typeof h=="function"?h(_,w):E==="object"&&!Array.isArray(_)?{...w,..._}:_}else return typeof i!="string"?i:S.read(i)}function A(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){y.value=w;return}if(!(r&&r.key!==e)){R();try{(r==null?void 0:r.newValue)!==S.write(y.value)&&(y.value=U(r))}catch(i){d(i)}finally{r?G(T):T()}}}}function q(r){A(r.detail)}return y}const We={class:"chat-box orange-border"},ze={class:"chat-item"},De=B({__name:"chat-room",setup(e){const t=N(""),n=ke("ai_api_text_history",[]);async function o(a){if(!a)return;const c=await window.ai.createTextSession(),u=c.promptStreaming(a);n.value.unshift({content:"",mine:!1});for await(const f of u)n.value[0].content=f;c.destroy()}function s(){t.value&&(n.value.unshift({content:t.value,mine:!0}),o(t.value),t.value="")}return(a,c)=>(v(),C("div",{class:"room-wrapper",onKeyup:ae(s,["enter"])},[m("div",We,[(v(!0),C(L,null,re(M(n),(u,f)=>(v(),C("div",{key:f,class:ie(["chat-row",{mine:u.mine}])},[m("div",ze,ce(u.content),1)],2))),128))]),oe(m("textarea",{"onUpdate:modelValue":c[0]||(c[0]=u=>t.value=u),class:"input-area orange-border"},null,512),[[se,t.value]]),m("button",{class:"send-btn",onClick:s},"发送")],32))}}),Ie=V(De,[["__scopeId","data-v-8b4d4974"]]),Me=B({__name:"chrome-ai-ui",setup(e){ue({title:"Chrome AI UI"});const t=N(!1);function n(){var o;return(o=window==null?void 0:window.ai)==null?void 0:o.createTextSession}return J(()=>{t.value=n()}),(o,s)=>{const a=_e,c=Ie;return t.value?(v(),z(c,{key:1})):(v(),z(a,{key:0}))}}});export{Me as default};
