import{_ as M}from"./plugin-vueexport-helper.x3n3nnut.js";import{o as v,c as F,f as z,g as V,n as J,r as E,h as R,i as B,j as q,k as U,l as Q,s as X,m as $,a as A,F as Y,q as Z,v as ee,x as te,y as ne,z as re,t as oe,A as W}from"./entry.kohZp6om.js";const se={},ae={class:"tip-text"};function ie(e,t){return v(),F("p",ae,"当前浏览器不支持")}const ue=M(se,[["render",ie],["__scopeId","data-v-41b25927"]]);function ce(e){return q()?(U(e),!0):!1}function C(e){return typeof e=="function"?e():z(e)}const le=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fe=Object.prototype.toString,pe=e=>fe.call(e)==="[object Object]",de=()=>{};function me(e,t){function n(...o){return new Promise((s,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(a)})}return n}const I=e=>e();function _e(e=I){const t=E(!0);function n(){t.value=!1}function o(){t.value=!0}const s=(...a)=>{t.value&&e(...a)};return{isActive:R(t),pause:n,resume:o,eventFilter:s}}function ye(e){return e||Q()}function he(e,t,n={}){const{eventFilter:o=I,...s}=n;return B(e,me(o,t),s)}function we(e,t,n={}){const{eventFilter:o,...s}=n,{eventFilter:a,pause:u,resume:c,isActive:f}=_e(o);return{stop:he(e,t,{...s,eventFilter:a}),pause:u,resume:c,isActive:f}}function ve(e,t=!0,n){ye()?V(e,n):t?e():J(e)}function ge(e){var t;const n=C(e);return(t=n==null?void 0:n.$el)!=null?t:n}const N=le?window:void 0;function k(...e){let t,n,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,s]=e,t=N):[t,n,o,s]=e,!t)return de;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],u=()=>{a.forEach(p=>p()),a.length=0},c=(p,l,w,d)=>(p.addEventListener(l,w,d),()=>p.removeEventListener(l,w,d)),f=B(()=>[ge(t),C(s)],([p,l])=>{if(u(),!p)return;const w=pe(l)?{...l}:l;a.push(...n.flatMap(d=>o.map(S=>c(p,d,S,w))))},{immediate:!0,flush:"post"}),_=()=>{f(),u()};return ce(_),_}const x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O="__vueuse_ssr_handlers__",Se=be();function be(){return O in x||(x[O]=x[O]||{}),x[O]}function Ae(e,t){return Se[e]||t}function xe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Oe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},L="vueuse-storage";function Fe(e,t,n,o={}){var s;const{flush:a="pre",deep:u=!0,listenToStorageChanges:c=!0,writeDefaults:f=!0,mergeDefaults:_=!1,shallow:p,window:l=N,eventFilter:w,onError:d=r=>{console.error(r)},initOnMounted:S}=o,y=(p?X:E)(typeof t=="function"?t():t);if(!n)try{n=Ae("getDefaultStorage",()=>{var r;return(r=N)==null?void 0:r.localStorage})()}catch(r){d(r)}if(!n)return y;const h=C(t),T=xe(h),g=(s=o.serializer)!=null?s:Oe[T],{pause:K,resume:j}=we(y,()=>P(y.value),{flush:a,deep:u,eventFilter:w});l&&c&&ve(()=>{k(l,"storage",b),k(l,L,H),S&&b()}),S||b();function D(r,i){l&&l.dispatchEvent(new CustomEvent(L,{detail:{key:e,oldValue:r,newValue:i,storageArea:n}}))}function P(r){try{const i=n.getItem(e);if(r==null)D(i,null),n.removeItem(e);else{const m=g.write(r);i!==m&&(n.setItem(e,m),D(i,m))}}catch(i){d(i)}}function G(r){const i=r?r.newValue:n.getItem(e);if(i==null)return f&&h!=null&&n.setItem(e,g.write(h)),h;if(!r&&_){const m=g.read(i);return typeof _=="function"?_(m,h):T==="object"&&!Array.isArray(m)?{...h,...m}:m}else return typeof i!="string"?i:g.read(i)}function b(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){y.value=h;return}if(!(r&&r.key!==e)){K();try{(r==null?void 0:r.newValue)!==g.write(y.value)&&(y.value=G(r))}catch(i){d(i)}finally{r?J(j):j()}}}}function H(r){b(r.detail)}return y}const Ee={class:"chat-box orange-border"},Ne={class:"chat-item"},Ce=$({__name:"chat-room",setup(e){const t=E(""),n=Fe("ai_api_text_history",[]);async function o(a){if(!a)return;const u=await window.ai.createTextSession(),c=u.promptStreaming(a);n.value.unshift({content:"",mine:!1});for await(const f of c)n.value[0].content=f;u.destroy()}function s(){t.value&&(n.value.unshift({content:t.value,mine:!0}),o(t.value),t.value="")}return(a,u)=>(v(),F("div",{class:"room-wrapper",onKeyup:ne(s,["enter"])},[A("div",Ee,[(v(!0),F(Y,null,Z(z(n),(c,f)=>(v(),F("div",{key:f,class:re(["chat-row",{mine:c.mine}])},[A("div",Ne,oe(c.content),1)],2))),128))]),ee(A("textarea",{"onUpdate:modelValue":u[0]||(u[0]=c=>t.value=c),class:"input-area orange-border"},null,512),[[te,t.value]]),A("button",{class:"send-btn",onClick:s},"发送")],32))}}),Te=M(Ce,[["__scopeId","data-v-322ed8e3"]]),We=$({__name:"chrome-ai-ui",setup(e){const t=E(!1);function n(){var o;return(o=window==null?void 0:window.ai)==null?void 0:o.createTextSession}return V(()=>{t.value=n()}),(o,s)=>{const a=ue,u=Te;return t.value?(v(),W(u,{key:1})):(v(),W(a,{key:0}))}}});export{We as default};
